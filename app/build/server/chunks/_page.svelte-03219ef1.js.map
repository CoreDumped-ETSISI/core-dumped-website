{"version":3,"file":"_page.svelte-03219ef1.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/edit/_id_/_page.svelte.js"],"sourcesContent":["import { c as create_ssr_component, v as validate_component, g as add_attribute, e as escape, f as each } from \"../../../../chunks/ssr.js\";\nimport \"devalue\";\nimport { g as goto } from \"../../../../chunks/navigation.js\";\nimport { C as CardComponent } from \"../../../../chunks/CardComponent.js\";\nimport { T as Title } from \"../../../../chunks/Title.js\";\nconst _page_svelte_svelte_type_style_lang = \"\";\nconst css = {\n  code: \".formColumn.svelte-1ssu0u{background-color:white;border-radius:24px;padding:20px}.container.svelte-1ssu0u{margin-top:16px;display:flex;flex-direction:row;gap:8px;flex-flow:wrap;justify-content:center;align-items:center}input.svelte-1ssu0u{border:none;font-size:16px;border-bottom:1px solid #5fb030;margin-bottom:8px;background-color:whitesmoke}select.svelte-1ssu0u{border:none;font-size:16px;border-bottom:1px solid #5fb030;margin-bottom:8px;background-color:whitesmoke}textarea.svelte-1ssu0u{border:none;font-size:16px;border-bottom:1px solid #5fb030;margin-bottom:8px;background-color:whitesmoke}button.svelte-1ssu0u{width:fit-content;background-color:#5fb030;color:white;box-shadow:0 4px 4px 0 rgba(0, 0, 0, 0.205);border-radius:16px;border:transparent;padding:6px}button.svelte-1ssu0u:active{box-shadow:none}.svelte-1ssu0u:disabled{background-color:rgba(85, 159, 45, 0.049);border-bottom:1px solid gray}button.svelte-1ssu0u:disabled{border-bottom:none;color:black;box-shadow:none}.error.svelte-1ssu0u{color:red}.delete.svelte-1ssu0u{background-color:red}\",\n  map: null\n};\nconst Page = create_ssr_component(($$result, $$props, $$bindings, slots) => {\n  let { data } = $$props;\n  let { form } = $$props;\n  let disable = true;\n  let disableNew = true;\n  let categories = [];\n  let validDelete = false;\n  let confirmDelete = \"\";\n  let formData = {\n    type: data.data.type,\n    title: data.data.title,\n    description: data.data.description,\n    image: data.data.image,\n    date: data.data.date,\n    category: data.data.category,\n    newCategory: \"\",\n    status: data.data.status\n  };\n  const snapshot = {\n    capture: () => formData,\n    restore: (value) => formData = value\n  };\n  if ($$props.data === void 0 && $$bindings.data && data !== void 0)\n    $$bindings.data(data);\n  if ($$props.form === void 0 && $$bindings.form && form !== void 0)\n    $$bindings.form(form);\n  if ($$props.snapshot === void 0 && $$bindings.snapshot && snapshot !== void 0)\n    $$bindings.snapshot(snapshot);\n  $$result.css.add(css);\n  validDelete = confirmDelete.trim() === \"CONFIRMAR\";\n  disable = formData.type === \"\";\n  disableNew = formData.category !== \"new\";\n  {\n    if (formData.type === \"Proyecto\") {\n      categories = [...data.projects];\n    } else if (formData.type === \"Evento\") {\n      categories = [...data.events];\n    }\n  }\n  {\n    if (form?.error === \"Unauthorized\") {\n      goto(\"/admin?back=true\");\n    } else if (form?.success) {\n      goto(\"/edit/cartas\");\n    }\n  }\n  return `${validate_component(Title, \"Title\").$$render($$result, {}, {}, {\n    default: () => {\n      return `Modificar carta`;\n    }\n  })} <div class=\"container svelte-1ssu0u\"><div class=\"cardColumn svelte-1ssu0u\">${validate_component(CardComponent, \"CardComponent\").$$render(\n    $$result,\n    {\n      title: formData.title.length > 0 ? formData.title : \"Título\",\n      image_src: formData.image.length > 0 ? formData.image : \"/fallback.png\",\n      date: formData.date !== void 0 && formData.date.length > 0 ? formData.date : (/* @__PURE__ */ new Date()).toISOString(),\n      category: (formData.category !== \"new\" ? formData.category : formData.newCategory) || \"Categoría\",\n      status: formData.status.length > 0 ? formData.status : \"Estado\",\n      description: formData.description.length > 0 ? formData.description : \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus placerat id leo eget tincidunt. Nullam ullamcorper.\",\n      id: \"\"\n    },\n    {},\n    {}\n  )}</div> <div class=\"formColumn svelte-1ssu0u\"><form method=\"POST\" action=\"?/update\" class=\"svelte-1ssu0u\"><input type=\"text\" name=\"id\" id=\"id\"${add_attribute(\"value\", data.data._id, 0)} hidden class=\"svelte-1ssu0u\"> <label for=\"type\" class=\"svelte-1ssu0u\" data-svelte-h=\"svelte-19ao2ak\">Tipo</label> <select name=\"type\" id=\"type\" required class=\"svelte-1ssu0u\"><option value=\"Proyecto\" class=\"svelte-1ssu0u\" data-svelte-h=\"svelte-1vgba46\">Proyecto</option><option value=\"Evento\" class=\"svelte-1ssu0u\" data-svelte-h=\"svelte-16pw422\">Evento</option></select> <br class=\"svelte-1ssu0u\"> <label for=\"title\" class=\"svelte-1ssu0u\" data-svelte-h=\"svelte-1bxdx9j\">Título</label> <br class=\"svelte-1ssu0u\"> <input type=\"text\" id=\"title\" name=\"title\" placeholder=\"Título\"${add_attribute(\"size\", 20, 0)} maxlength=\"20\" ${disable ? \"disabled\" : \"\"} required class=\"svelte-1ssu0u\"${add_attribute(\"value\", formData.title, 0)}> <br class=\"svelte-1ssu0u\"> <label for=\"description\" class=\"svelte-1ssu0u\" data-svelte-h=\"svelte-4yvg3t\">Descripción</label> <br class=\"svelte-1ssu0u\"> <small class=\"svelte-1ssu0u\" data-svelte-h=\"svelte-fvwp4o\">La primera linea será la que aparezca en la carta, tiene que intentar\n        enganchar al usuario.\n        <br class=\"svelte-1ssu0u\">\n        Usa el resto de la descripción para dar todos los detalles relevantes.</small> <br class=\"svelte-1ssu0u\"> <textarea name=\"description\" id=\"description\" placeholder=\"Descripción\" cols=\"50\" rows=\"10\" minlength=\"100\" required ${disable ? \"disabled\" : \"\"} class=\"svelte-1ssu0u\">${escape(formData.description || \"\")}</textarea> <br class=\"svelte-1ssu0u\"> <label for=\"image\" class=\"svelte-1ssu0u\" data-svelte-h=\"svelte-19wabop\">URL de la imagen</label> <br class=\"svelte-1ssu0u\"> <small class=\"svelte-1ssu0u\" data-svelte-h=\"svelte-18ollfi\">Subela a la unidad compartida de drive y hazla publica.\n        <br class=\"svelte-1ssu0u\">\n        Para mayor calidad, la imagen tiene que tener un ratio de aspecto de 1:1\n        (cuadrada) <br class=\"svelte-1ssu0u\"> y una resolucion minima de 1000x1000 pixeles.</small> <br class=\"svelte-1ssu0u\"> <input type=\"url\" name=\"image\" id=\"image\" placeholder=\"https://drive.google.com/file/d/...\" required ${disable ? \"disabled\" : \"\"} class=\"svelte-1ssu0u\"${add_attribute(\"value\", formData.image, 0)}> <br class=\"svelte-1ssu0u\"> <label for=\"date\" class=\"svelte-1ssu0u\" data-svelte-h=\"svelte-ozwb37\">Fecha de publicación</label> <br class=\"svelte-1ssu0u\"> <small class=\"svelte-1ssu0u\" data-svelte-h=\"svelte-c8yk18\">Dejala vacía para mantenerla</small> <br class=\"svelte-1ssu0u\"> <input type=\"date\" name=\"date\" id=\"date\"${add_attribute(\"max\", (/* @__PURE__ */ new Date()).toLocaleDateString(\"fr-ca\"), 0)} ${disable ? \"disabled\" : \"\"} class=\"svelte-1ssu0u\"${add_attribute(\"value\", formData.date, 0)}> <br class=\"svelte-1ssu0u\"> <label for=\"category\" class=\"svelte-1ssu0u\" data-svelte-h=\"svelte-p0fyn\">Categoria</label> <br class=\"svelte-1ssu0u\"> <select name=\"category\" id=\"category\" required ${disable ? \"disabled\" : \"\"} class=\"svelte-1ssu0u\"><option value=\"new\" class=\"svelte-1ssu0u\" data-svelte-h=\"svelte-g2voz6\">Crear nueva</option>${each(categories, (item) => {\n    return `<option${add_attribute(\"value\", item, 0)} class=\"svelte-1ssu0u\">${escape(item)}</option>`;\n  })}</select> <input type=\"text\" id=\"newcategory\" name=\"newcategory\" placeholder=\"Nueva categoría\" size=\"14\" maxlength=\"16\" ${disable || disableNew ? \"disabled\" : \"\"} ${!disableNew ? \"required\" : \"\"} class=\"svelte-1ssu0u\"${add_attribute(\"value\", formData.newCategory, 0)}> <br class=\"svelte-1ssu0u\"> <label for=\"status\" class=\"svelte-1ssu0u\" data-svelte-h=\"svelte-19r6n6a\">Estado</label> <br class=\"svelte-1ssu0u\"> <select id=\"status\" name=\"status\" required ${disable ? \"disabled\" : \"\"} class=\"svelte-1ssu0u\"><option value=\"Completado\" class=\"svelte-1ssu0u\" data-svelte-h=\"svelte-1i8f1ye\">Completado</option><option value=\"En progreso\" class=\"svelte-1ssu0u\" data-svelte-h=\"svelte-1uzctse\">En progreso</option><option value=\"Cancelado\" class=\"svelte-1ssu0u\" data-svelte-h=\"svelte-1qgsv7i\">Cancelado</option><option value=\"Próximamente\" class=\"svelte-1ssu0u\" data-svelte-h=\"svelte-1skw7a\">Próximamente</option></select> <br class=\"svelte-1ssu0u\"> <button type=\"submit\" ${disable ? \"disabled\" : \"\"} class=\"svelte-1ssu0u\">Actualizar</button> <button type=\"button\" class=\"delete svelte-1ssu0u\" ${\"\"}>Borrar</button> <input type=\"text\" name=\"delete\" placeholder=\"Escribe CONFIRMAR\" ${\"hidden\"} class=\"svelte-1ssu0u\"${add_attribute(\"value\", confirmDelete, 0)}> <button type=\"submit\" formaction=\"?/delete\" class=\"delete svelte-1ssu0u\" ${\"hidden\"} ${!validDelete ? \"disabled\" : \"\"}>Confirmar borrar</button> ${form?.error ? `<div class=\"error svelte-1ssu0u\">! ${escape(form.error)}</div>` : ``}</form></div> </div>`;\n});\nexport {\n  Page as default\n};\n"],"names":[],"mappings":"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"}